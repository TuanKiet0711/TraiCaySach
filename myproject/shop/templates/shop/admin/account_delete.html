{% extends "shop/admin/base_admin.html" %}
{% block title %}Xóa tài khoản{% endblock %}
{% block page_title %}Xóa tài khoản{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="alert alert-warning">
    <h5>Bạn có chắc muốn xóa tài khoản này?</h5>
    <p>Thao tác này không thể hoàn tác.</p>
  </div>
  <div class="d-flex gap-2">
    <button id="btnDelete" class="btn btn-danger">Xóa</button>
    <a href="{% url 'shop:admin_accounts' %}" class="btn btn-secondary">Hủy</a>
  </div>
</div>

<script>
document.getElementById('btnDelete').addEventListener('click',async()=>{
  if(!confirm('Bạn có chắc muốn xóa tài khoản này?'))return;
  const res=await fetch(`/api/accounts/{{ account_id }}/`,{method:'DELETE'});
  if(res.ok){
    window.location.href="{% url 'shop:admin_accounts' %}";
  }else{
    const data=await res.json().catch(()=>({}));
    alert(data.error||'Lỗi xóa tài khoản');
  }
});
</script>
{% endblock %}
